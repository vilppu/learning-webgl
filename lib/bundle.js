require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

/*global mat4:false */


var setupViewPortOf = exports.setupViewPortOf = function (gl) {
  gl.clearColor(0, 0, 0, 1);
  gl.enable(gl.DEPTH_TEST);
  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
};

var clearViewPortOf = exports.clearViewPortOf = function (gl) {
  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
};

// export const positionCameraTo = (positionVector) => {
//         return {
//         using: (gl) => {  
//         }
//     };
// };

// export const directCameraTo = (directionVector) => {
//         return {
//         using: (gl) => {  
//         }
//     };
// };

},{}],2:[function(require,module,exports){
"use strict";

/*global mat4:false */

var getWebGLRenderingContextOf = exports.getWebGLRenderingContextOf = function (canvas) {
  var glOptions = { antialias: true };
  var gl = canvas.getContext("webgl", glOptions);

  if (!gl) {
    canvas.getContext("experimental-webgl", glOptions);
  }

  if (!gl) {
    throw "WebGL is not supported";
  }

  gl.projectionMatrix = mat4.create();
  gl.modelViewMatrix = mat4.create();
  mat4.perspective(gl.projectionMatrix, 45, gl.canvas.width / gl.canvas.height, 0.1, 100);

  return gl;
};

},{}],3:[function(require,module,exports){
"use strict";

var validateThatShaderWasCompiledSuccessfully = function (gl, shader, shaderName) {
  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    var lastError = gl.getShaderInfoLog(shader);
    gl.deleteShader(shader);
    throw "Failed to compile shader " + shaderName + ":" + lastError;
  }
};

var validateThatProgramWasLinkedSuccessfully = function (gl, shaderProgram) {
  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
    var lastError = gl.getProgramInfoLog(shaderProgram);
    gl.deleteProgram(shaderProgram);
    throw "Failed to link shader program:" + lastError;
  }
};

var loadShaderFromElement = function (elementId) {
  return {
    using: function (gl) {
      var shaderScriptElement = document.getElementById(elementId);
      var shaderType = shaderScriptElement.type === "x-shader/x-fragment" ? gl.FRAGMENT_SHADER : gl.VERTEX_SHADER;
      var shader = gl.createShader(shaderType);

      gl.shaderSource(shader, shaderScriptElement.textContent);
      gl.compileShader(shader);
      validateThatShaderWasCompiledSuccessfully(gl, shader, elementId);

      return shader;
    }
  };
};

var loadShader = function (shaderName) {
  return {
    to: function (shaderProgram) {
      return {
        using: function (gl) {
          var shader = loadShaderFromElement(shaderName).using(gl);

          gl.attachShader(shaderProgram, shader);
          gl.deleteShader(shader);

          return shader;
        }
      };
    }
  };
};

var getUniform = exports.getUniform = function (uniformName) {
  return {
    of: function (shaderProgram) {
      return {
        using: function (gl) {
          shaderProgram.uniforms = shaderProgram.uniforms || [];
          shaderProgram.uniforms[uniformName] = shaderProgram.uniforms[uniformName] || gl.getUniformLocation(shaderProgram, uniformName);

          return shaderProgram.uniforms[uniformName];
        }
      };
    }
  };
};

var loadShaderProgram = exports.loadShaderProgram = function (shaderNames) {
  return {
    to: function (gl) {
      var shaderProgram = gl.createProgram();

      for (var _iterator = shaderNames[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
        var shaderName = _step.value;
        loadShader(shaderName).to(shaderProgram).using(gl);
      }

      gl.linkProgram(shaderProgram);
      validateThatProgramWasLinkedSuccessfully(gl, shaderProgram);

      gl.useProgram(shaderProgram);
      shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
      gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

      shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
      shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");

      return shaderProgram;
    }
  };
};

},{}],4:[function(require,module,exports){
"use strict";

/*global mat4:false */
var loadShaderProgram = require("./gl-shaders").loadShaderProgram;
var getTriangleMeshFrom = exports.getTriangleMeshFrom = function (triangleMeshSource) {
  return {
    using: function (webGLRenderingContext) {
      var gl = webGLRenderingContext;

      var verterBufferFrom = function (vertices) {
        var vertexBuffer = gl.createBuffer();

        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
        vertexBuffer.itemSize = 3;
        vertexBuffer.numItems = 3;

        return vertexBuffer;
      };

      var shaderProgramFrom = function (shaderNames) {
        return loadShaderProgram(shaderNames).to(gl);
      };

      return {
        vertexBuffer: verterBufferFrom(triangleMeshSource.vertices),
        shaderProgram: shaderProgramFrom(triangleMeshSource.shaderNames)
      };
    }
  };
};

var render = exports.render = function (triangleMesh) {
  return {
    to: function (webGLRenderingContext) {
      var gl = webGLRenderingContext;
      var shaderProgram = triangleMesh.shaderProgram;

      var setMatrixUniforms = function () {
        gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, gl.projectionMatrix);
        gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, gl.modelViewMatrix);
      };

      mat4.identity(gl.modelViewMatrix);
      mat4.translate(gl.modelViewMatrix, gl.modelViewMatrix, [0, 0, -1.8]);
      gl.bindBuffer(gl.ARRAY_BUFFER, triangleMesh.vertexBuffer);
      gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, triangleMesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);
      setMatrixUniforms();
      gl.drawArrays(gl.TRIANGLES, 0, triangleMesh.vertexBuffer.numItems);
    }
  };
};

},{"./gl-shaders":3}],"application":[function(require,module,exports){
"use strict";

var getWebGLRenderingContextOf = require("./gl-context").getWebGLRenderingContextOf;
var setupViewPortOf = require("./gl-camera").setupViewPortOf;
var clearViewPortOf = require("./gl-camera").clearViewPortOf;
var getTriangleMeshFrom = require("./gl-triangle-mesh").getTriangleMeshFrom;
var render = require("./gl-triangle-mesh").render;
var startOn = exports.startOn = function (canvas) {
  var triangleVertices = [0, 1, 0, -1, -1, 0, 1, -1, 0];

  var gl = getWebGLRenderingContextOf(canvas);

  var triangleSource = {
    vertices: triangleVertices,
    shaderNames: ["shader-fs", "shader-vs"]
  };

  var triangle = getTriangleMeshFrom(triangleSource).using(gl);

  var resizeCanvasToFitWindow = function () {
    setupViewPortOf(gl);
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  };

  var animationLoop = function () {
    resizeCanvasToFitWindow();

    clearViewPortOf(gl);
    render(triangle).to(gl);
    window.requestAnimationFrame(animationLoop);
  };

  animationLoop();
};

},{"./gl-camera":1,"./gl-context":2,"./gl-triangle-mesh":4}]},{},[])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXEFwcERhdGFcXFJvYW1pbmdcXG5wbVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCJDOi9Vc2Vycy90aW1vdl8wMDAvRG9jdW1lbnRzL0dpdEh1Yi9sZWFybmluZy13ZWJnbC9zcmMvZ2wtY2FtZXJhLmpzIiwiQzovVXNlcnMvdGltb3ZfMDAwL0RvY3VtZW50cy9HaXRIdWIvbGVhcm5pbmctd2ViZ2wvc3JjL2dsLWNvbnRleHQuanMiLCJDOi9Vc2Vycy90aW1vdl8wMDAvRG9jdW1lbnRzL0dpdEh1Yi9sZWFybmluZy13ZWJnbC9zcmMvZ2wtc2hhZGVycy5qcyIsIkM6L1VzZXJzL3RpbW92XzAwMC9Eb2N1bWVudHMvR2l0SHViL2xlYXJuaW5nLXdlYmdsL3NyYy9nbC10cmlhbmdsZS1tZXNoLmpzIiwiQzovVXNlcnMvdGltb3ZfMDAwL0RvY3VtZW50cy9HaXRIdWIvbGVhcm5pbmctd2ViZ2wvc3JjL2FwcGxpY2F0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNHTyxJQUFNLGVBQWUsV0FBZixlQUFlLEdBQUcsVUFBQyxFQUFFLEVBQUs7QUFDbkMsSUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFHLEVBQUUsQ0FBRyxFQUFFLENBQUcsRUFBRSxDQUFHLENBQUMsQ0FBQztBQUNsQyxJQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUN6QixJQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztDQUN4RCxDQUFDOztBQUVLLElBQU0sZUFBZSxXQUFmLGVBQWUsR0FBRyxVQUFDLEVBQUUsRUFBSztBQUNuQyxJQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0Is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QyxDQUFDOztBQUUvRCxNQUFNLHVCQUF1QixHQUFHLFlBQU07QUFDbEMsbUJBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNwQixVQUFNLENBQUMsS0FBSyxHQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUM7QUFDL0IsVUFBTSxDQUFDLE1BQU0sR0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDO0dBQ3BDLENBQUM7O0FBRUYsTUFBTSxhQUFhLEdBQUcsWUFBTTtBQUN4QiwyQkFBdUIsRUFBRSxDQUFDOztBQUUxQixtQkFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3BCLFVBQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDeEIsVUFBTSxDQUFDLHFCQUFxQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0dBQy9DLENBQUM7O0FBRUYsZUFBYSxFQUFFLENBQUM7Q0FDbkIsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKmdsb2JhbCBtYXQ0OmZhbHNlICovXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHNldHVwVmlld1BvcnRPZiA9IChnbCkgPT4ge1xyXG4gICAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpOyAgICBcclxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY2xlYXJWaWV3UG9ydE9mID0gKGdsKSA9PiB7XHJcbiAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVCk7XHJcbn07XHJcblxyXG4vLyBleHBvcnQgY29uc3QgcG9zaXRpb25DYW1lcmFUbyA9IChwb3NpdGlvblZlY3RvcikgPT4ge1xyXG4vLyAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgdXNpbmc6IChnbCkgPT4geyAgIFxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH07XHJcbi8vIH07XHJcblxyXG4vLyBleHBvcnQgY29uc3QgZGlyZWN0Q2FtZXJhVG8gPSAoZGlyZWN0aW9uVmVjdG9yKSA9PiB7XHJcbi8vICAgICAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgICB1c2luZzogKGdsKSA9PiB7ICAgXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfTtcclxuLy8gfTtcclxuIiwiLypnbG9iYWwgbWF0NDpmYWxzZSAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFdlYkdMUmVuZGVyaW5nQ29udGV4dE9mID0gKGNhbnZhcykgPT4ge1xyXG4gICAgY29uc3QgZ2xPcHRpb25zID0geyBhbnRpYWxpYXM6IHRydWUgfTtcclxuICAgIGxldCBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2xcIiwgZ2xPcHRpb25zKTtcclxuXHJcbiAgICBpZighZ2wpIHtcclxuICAgICAgICBjYW52YXMuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLCBnbE9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCFnbCkge1xyXG4gICAgICAgIHRocm93IFwiV2ViR0wgaXMgbm90IHN1cHBvcnRlZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdsLnByb2plY3Rpb25NYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gICAgZ2wubW9kZWxWaWV3TWF0cml4ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgIG1hdDQucGVyc3BlY3RpdmUoZ2wucHJvamVjdGlvbk1hdHJpeCwgNDUsIGdsLmNhbnZhcy53aWR0aCAvIGdsLmNhbnZhcy5oZWlnaHQsIDAuMSwgMTAwLjApO1xyXG5cclxuICAgIHJldHVybiBnbDtcclxufTtcclxuIiwiY29uc3QgdmFsaWRhdGVUaGF0U2hhZGVyV2FzQ29tcGlsZWRTdWNjZXNzZnVsbHkgPSAoZ2wsIHNoYWRlciwgc2hhZGVyTmFtZSkgPT4ge1xyXG4gICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcclxuICAgICAgICB2YXIgbGFzdEVycm9yID0gZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xyXG4gICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgICAgIHRocm93IFwiRmFpbGVkIHRvIGNvbXBpbGUgc2hhZGVyIFwiICsgc2hhZGVyTmFtZSArIFwiOlwiICsgbGFzdEVycm9yO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgdmFsaWRhdGVUaGF0UHJvZ3JhbVdhc0xpbmtlZFN1Y2Nlc3NmdWxseSA9IChnbCwgc2hhZGVyUHJvZ3JhbSkgPT4ge1xyXG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHNoYWRlclByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xyXG4gICAgICAgIHZhciBsYXN0RXJyb3IgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKTtcclxuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgICAgIHRocm93IFwiRmFpbGVkIHRvIGxpbmsgc2hhZGVyIHByb2dyYW06XCIgKyBsYXN0RXJyb3I7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBsb2FkU2hhZGVyRnJvbUVsZW1lbnQgPSAoZWxlbWVudElkKSA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHVzaW5nOiAoZ2wpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2hhZGVyU2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYWRlclR5cGUgPSBzaGFkZXJTY3JpcHRFbGVtZW50LnR5cGUgPT09IFwieC1zaGFkZXIveC1mcmFnbWVudFwiID8gZ2wuRlJBR01FTlRfU0hBREVSIDogZ2wuVkVSVEVYX1NIQURFUjtcclxuICAgICAgICAgICAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpO1xyXG5cclxuICAgICAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc2hhZGVyU2NyaXB0RWxlbWVudC50ZXh0Q29udGVudCk7XHJcbiAgICAgICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVUaGF0U2hhZGVyV2FzQ29tcGlsZWRTdWNjZXNzZnVsbHkoZ2wsIHNoYWRlciwgZWxlbWVudElkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBzaGFkZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuXHJcbmNvbnN0IGxvYWRTaGFkZXIgPSAoc2hhZGVyTmFtZSkgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0bzogKHNoYWRlclByb2dyYW0pID0+e1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdXNpbmc6IChnbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaGFkZXIgPSBsb2FkU2hhZGVyRnJvbUVsZW1lbnQoc2hhZGVyTmFtZSkudXNpbmcoZ2wpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCBzaGFkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VW5pZm9ybSA9ICh1bmlmb3JtTmFtZSkgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBvZjogKHNoYWRlclByb2dyYW0pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHVzaW5nOiAoZ2wpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzaGFkZXJQcm9ncmFtLnVuaWZvcm1zID0gc2hhZGVyUHJvZ3JhbS51bmlmb3JtcyB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICBzaGFkZXJQcm9ncmFtLnVuaWZvcm1zW3VuaWZvcm1OYW1lXSA9IHNoYWRlclByb2dyYW0udW5pZm9ybXNbdW5pZm9ybU5hbWVdIHx8IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCB1bmlmb3JtTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGFkZXJQcm9ncmFtLnVuaWZvcm1zW3VuaWZvcm1OYW1lXTsgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbG9hZFNoYWRlclByb2dyYW0gPSAoc2hhZGVyTmFtZXMpID0+IHtcclxuICAgIHJldHVybiAge1xyXG4gICAgICAgIHRvOiAoZ2wpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2hhZGVyUHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIHNoYWRlck5hbWUgb2Ygc2hhZGVyTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIGxvYWRTaGFkZXIoc2hhZGVyTmFtZSkudG8oc2hhZGVyUHJvZ3JhbSkudXNpbmcoZ2wpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBnbC5saW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVUaGF0UHJvZ3JhbVdhc0xpbmtlZFN1Y2Nlc3NmdWxseShnbCwgc2hhZGVyUHJvZ3JhbSk7XHJcblxyXG4gICAgICAgICAgICBnbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgICAgICAgICBzaGFkZXJQcm9ncmFtLnZlcnRleFBvc2l0aW9uQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJhVmVydGV4UG9zaXRpb25cIik7XHJcbiAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNoYWRlclByb2dyYW0udmVydGV4UG9zaXRpb25BdHRyaWJ1dGUpO1xyXG5cclxuICAgICAgICAgICAgc2hhZGVyUHJvZ3JhbS5wTWF0cml4VW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcInVQTWF0cml4XCIpO1xyXG4gICAgICAgICAgICBzaGFkZXJQcm9ncmFtLm12TWF0cml4VW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcInVNVk1hdHJpeFwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzaGFkZXJQcm9ncmFtO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcbiIsIi8qZ2xvYmFsIG1hdDQ6ZmFsc2UgKi9cclxuaW1wb3J0ICB7IGxvYWRTaGFkZXJQcm9ncmFtIH0gZnJvbSAnLi9nbC1zaGFkZXJzJztcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRUcmlhbmdsZU1lc2hGcm9tID0gKHRyaWFuZ2xlTWVzaFNvdXJjZSkgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1c2luZzogKHdlYkdMUmVuZGVyaW5nQ29udGV4dCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBnbCA9IHdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnRlckJ1ZmZlckZyb20gPSAodmVydGljZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIuaXRlbVNpemUgPSAzO1xyXG4gICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLm51bUl0ZW1zID0gMztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVydGV4QnVmZmVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hhZGVyUHJvZ3JhbUZyb20gPSAoc2hhZGVyTmFtZXMpID0+IHsgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZFNoYWRlclByb2dyYW0oc2hhZGVyTmFtZXMpLnRvKGdsKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXI6IHZlcnRlckJ1ZmZlckZyb20odHJpYW5nbGVNZXNoU291cmNlLnZlcnRpY2VzKSxcclxuICAgICAgICAgICAgICAgIHNoYWRlclByb2dyYW06IHNoYWRlclByb2dyYW1Gcm9tKHRyaWFuZ2xlTWVzaFNvdXJjZS5zaGFkZXJOYW1lcylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbmRlciA9ICh0cmlhbmdsZU1lc2gpID0+IHsgICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvOiAod2ViR0xSZW5kZXJpbmdDb250ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gd2ViR0xSZW5kZXJpbmdDb250ZXh0O1xyXG4gICAgICAgICAgICBjb25zdCBzaGFkZXJQcm9ncmFtID0gdHJpYW5nbGVNZXNoLnNoYWRlclByb2dyYW07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXRNYXRyaXhVbmlmb3JtcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYoc2hhZGVyUHJvZ3JhbS5wTWF0cml4VW5pZm9ybSwgZmFsc2UsIGdsLnByb2plY3Rpb25NYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdihzaGFkZXJQcm9ncmFtLm12TWF0cml4VW5pZm9ybSwgZmFsc2UsIGdsLm1vZGVsVmlld01hdHJpeCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBtYXQ0LmlkZW50aXR5KGdsLm1vZGVsVmlld01hdHJpeCk7XHJcbiAgICAgICAgICAgIG1hdDQudHJhbnNsYXRlKGdsLm1vZGVsVmlld01hdHJpeCwgZ2wubW9kZWxWaWV3TWF0cml4LCBbMCwgMC4wLCAtMS44XSk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0cmlhbmdsZU1lc2gudmVydGV4QnVmZmVyKTtcclxuICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXJQcm9ncmFtLnZlcnRleFBvc2l0aW9uQXR0cmlidXRlLCB0cmlhbmdsZU1lc2gudmVydGV4QnVmZmVyLml0ZW1TaXplLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgICAgICBzZXRNYXRyaXhVbmlmb3JtcygpO1xyXG4gICAgICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgdHJpYW5nbGVNZXNoLnZlcnRleEJ1ZmZlci5udW1JdGVtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuIiwiaW1wb3J0ICB7IGdldFdlYkdMUmVuZGVyaW5nQ29udGV4dE9mIH0gZnJvbSAnLi9nbC1jb250ZXh0JztcclxuaW1wb3J0ICB7IHNldHVwVmlld1BvcnRPZiwgY2xlYXJWaWV3UG9ydE9mLCAgfSBmcm9tICcuL2dsLWNhbWVyYSc7XHJcbmltcG9ydCAgeyBnZXRUcmlhbmdsZU1lc2hGcm9tLCByZW5kZXIgIH0gZnJvbSAnLi9nbC10cmlhbmdsZS1tZXNoJztcclxuXHJcblxyXG5leHBvcnQgY29uc3Qgc3RhcnRPbiA9IChjYW52YXMpID0+IHtcclxuXHJcbiAgICBjb25zdCB0cmlhbmdsZVZlcnRpY2VzID0gW1xyXG4gICAgICAgIDAuMCwgIDEuMCwgIDAuMCxcclxuICAgICAgICAtMS4wLCAtMS4wLCAgMC4wLFxyXG4gICAgICAgIDEuMCwgLTEuMCwgIDAuMFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBnbCA9IGdldFdlYkdMUmVuZGVyaW5nQ29udGV4dE9mKGNhbnZhcyk7XHJcblxyXG4gICAgY29uc3QgdHJpYW5nbGVTb3VyY2UgPSB7ICAgICAgICBcclxuICAgICAgICB2ZXJ0aWNlczogdHJpYW5nbGVWZXJ0aWNlcyxcclxuICAgICAgICBzaGFkZXJOYW1lczogW1wic2hhZGVyLWZzXCIsIFwic2hhZGVyLXZzXCJdXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRyaWFuZ2xlID0gZ2V0VHJpYW5nbGVNZXNoRnJvbSh0cmlhbmdsZVNvdXJjZSkudXNpbmcoZ2wpO1xyXG5cclxuICAgIGNvbnN0IHJlc2l6ZUNhbnZhc1RvRml0V2luZG93ID0gKCkgPT4ge1xyXG4gICAgICAgIHNldHVwVmlld1BvcnRPZihnbCk7XHJcbiAgICAgICAgY2FudmFzLndpZHRoPXdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQ9d2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBhbmltYXRpb25Mb29wID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc2l6ZUNhbnZhc1RvRml0V2luZG93KCk7XHJcblxyXG4gICAgICAgIGNsZWFyVmlld1BvcnRPZihnbCk7XHJcbiAgICAgICAgcmVuZGVyKHRyaWFuZ2xlKS50byhnbCk7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb25Mb29wKTtcclxuICAgIH07XHJcblxyXG4gICAgYW5pbWF0aW9uTG9vcCgpO1xyXG59O1xyXG4iXX0=
