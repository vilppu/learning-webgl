require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var setupViewPortOf = exports.setupViewPortOf = function (gl) {
  gl.clearColor(0, 0, 0, 1);
  gl.enable(gl.DEPTH_TEST);
  gl.projectionMatrix = mat4.create();
  gl.viewMatrix = mat4.create();
  mat4.perspective(gl.projectionMatrix, 45, gl.canvas.width / gl.canvas.height, 0.1, 100);
  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
};

var clearViewPortOf = exports.clearViewPortOf = function (gl) {
  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
};

var positionCameraTo = exports.positionCameraTo = function (positionVector) {
  return {
    using: function (gl) {}
  };
};

var directCameraTo = exports.directCameraTo = function (directionVector) {
  return {
    using: function (gl) {}
  };
};

},{}],2:[function(require,module,exports){
"use strict";

var getWebGLContextOf = exports.getWebGLContextOf = function (canvas) {
  var glOptions = { antialias: true };
  var gl = canvas.getContext("webgl", glOptions) || canvas.getContext("experimental-webgl", glOptions);

  if (!gl) {
    throw "WebGL is not supported";
  }

  return gl;
};

},{}],3:[function(require,module,exports){
"use strict";

var loadShaderProgram = require("./gl-shaders").loadShaderProgram;
var render = exports.render = function (renderable) {
  return {
    to: function (gl) {
      var verterBufferFrom = function (renderable) {
        var vertices = renderable.vertices;
        var vertexBuffer = gl.createBuffer();

        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
        vertexBuffer.itemSize = 3;
        vertexBuffer.numItems = 3;

        return vertexBuffer;
      };

      var shaderProgramFrom = function (renderable) {
        return loadShaderProgram(renderable.shaderNames).to(gl);
      };

      if (!renderable.vertexBuffer) {
        renderable.vertexBuffer = verterBufferFrom(renderable);
      }

      if (!renderable.shaderProgram) {
        renderable.shaderProgram = shaderProgramFrom(renderable);
      }

      if (!renderable.transformationMatrix) {
        renderable.transformationMatrix = mat4.create();
      }

      var shaderProgram = renderable.shaderProgram;

      var setMatrixUniforms = function () {
        gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, gl.projectionMatrix);
        gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, renderable.transformationMatrix);
      };

      mat4.identity(renderable.transformationMatrix);
      mat4.translate(renderable.transformationMatrix, renderable.transformationMatrix, [-1.5, 0, -7]);
      gl.bindBuffer(gl.ARRAY_BUFFER, renderable.vertexBuffer);
      gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, renderable.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);
      setMatrixUniforms();
      gl.drawArrays(gl.TRIANGLES, 0, renderable.vertexBuffer.numItems);
    }
  };
};

},{"./gl-shaders":4}],4:[function(require,module,exports){
"use strict";

var validateThatShaderWasCompiledSuccessfully = function (gl, shader, shaderName) {
  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    var lastError = gl.getShaderInfoLog(shader);
    gl.deleteShader(shader);
    throw "Failed to compile shader " + shaderName + ":" + lastError;
  }
};

var validateThatProgramWasLinkedSuccessfully = function (gl, shaderProgram) {
  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
    var lastError = gl.getProgramInfoLog(shaderProgram);
    gl.deleteProgram(shaderProgram);
    throw "Failed to link shader program:" + lastError;
  }
};

var loadShaderFromElement = function (elementId) {
  return {
    using: function (gl) {
      var shaderScriptElement = document.getElementById(elementId);
      var shaderType = shaderScriptElement.type == "x-shader/x-fragment" ? gl.FRAGMENT_SHADER : gl.VERTEX_SHADER;
      var shader = gl.createShader(shaderType);

      gl.shaderSource(shader, shaderScriptElement.textContent);
      gl.compileShader(shader);
      validateThatShaderWasCompiledSuccessfully(gl, shader, elementId);

      return shader;
    }
  };
};

var loadShader = function (shaderName) {
  return {
    to: function (shaderProgram) {
      return {
        using: function (gl) {
          var shader = loadShaderFromElement(shaderName).using(gl);

          gl.attachShader(shaderProgram, shader);
          gl.deleteShader(shader);

          return shader;
        }
      };
    }
  };
};

var getUniform = exports.getUniform = function (uniformName) {
  return {
    of: function (shaderProgram) {
      return {
        using: function (gl) {
          shaderProgram.uniforms = shaderProgram.uniforms || [];
          shaderProgram.uniforms[uniformName] = shaderProgram.uniforms[uniformName] || gl.getUniformLocation(shaderProgram, uniformName);

          return shaderProgram.uniforms[uniformName];
        }
      };
    }
  };
};

var loadShaderProgram = exports.loadShaderProgram = function (shaderNames) {
  return {
    to: function (gl) {
      var shaderProgram = gl.createProgram();

      for (var _iterator = shaderNames[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
        var shaderName = _step.value;
        loadShader(shaderName).to(shaderProgram).using(gl);
      }

      gl.linkProgram(shaderProgram);
      validateThatProgramWasLinkedSuccessfully(gl, shaderProgram);

      gl.useProgram(shaderProgram);
      shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
      gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

      shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
      shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");

      return shaderProgram;
    }
  };
};

},{}],"application":[function(require,module,exports){
"use strict";

var getWebGLContextOf = require("./gl-context").getWebGLContextOf;
var setupViewPortOf = require("./gl-camera").setupViewPortOf;
var clearViewPortOf = require("./gl-camera").clearViewPortOf;
var render = require("./gl-renderable").render;
var startOn = exports.startOn = function (canvas) {
  var resizeCanvasToFitWindow = function () {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  };

  var triangleVertives = [0, 1, 0, -1, -1, 0, 1, -1, 0];

  var triangle = {
    vertices: triangleVertives,
    shaderNames: ["shader-fs", "shader-vs"]
  };

  var gl = getWebGLContextOf(canvas);

  var animationLoop = function () {
    resizeCanvasToFitWindow();

    setupViewPortOf(gl);
    clearViewPortOf(gl);
    render(triangle).to(gl);
    window.requestAnimationFrame(animationLoop);
  };

  animationLoop();
};

},{"./gl-camera":1,"./gl-context":2,"./gl-renderable":3}]},{},[])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXEFwcERhdGFcXFJvYW1pbmdcXG5wbVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCJDOi9Vc2Vycy90aW1vdl8wMDAvRG9jdW1lbnRzL0dpdEh1Yi9sZWFybmluZy13ZWJnbC9zcmMvZ2wtY2FtZXJhLmpzIiwiQzovVXNlcnMvdGltb3ZfMDAwL0RvY3VtZW50cy9HaXRIdWIvbGVhcm5pbmctd2ViZ2wvc3JjL2dsLWNvbnRleHQuanMiLCJDOi9Vc2Vycy90aW1vdl8wMDAvRG9jdW1lbnRzL0dpdEh1Yi9sZWFybmluZy13ZWJnbC9zcmMvZ2wtcmVuZGVyYWJsZS5qcyIsIkM6L1VzZXJzL3RpbW92XzAwMC9Eb2N1bWVudHMvR2l0SHViL2xlYXJuaW5nLXdlYmdsL3NyYy9nbC1zaGFkZXJzLmpzIiwiQzovVXNlcnMvdGltb3ZfMDAwL0RvY3VtZW50cy9HaXRIdWIvbGVhcm5pbmctd2ViZ2wvc3JjL2FwcGxpY2F0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBTyxJQUFNLGVBQWUsV0FBZixlQUFlLEdBQUcsVUFBQyxFQUFFLEVBQUs7QUFDbkMsSUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFHLEVBQUUsQ0FBRyxFQUFFLENBQUcsRUFBRSxDQUFHLENBQUMsQ0FBQztBQUNsQyxJQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUN6QixJQUFFLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3BDLElBQUUsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzlCLE1BQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0s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LFFBQVEsR0FBRztBQUNiLFlBQVEsRUFBRSxnQkFBZ0I7QUFDMUIsZUFBVyxFQUFFLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQztHQUMxQyxDQUFBOztBQUVELE1BQU0sRUFBRSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVyQyxNQUFNLGFBQWEsR0FBRyxZQUFNO0FBQ3hCLDJCQUF1QixFQUFFLENBQUM7O0FBRTFCLG1CQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEIsbUJBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNwQixVQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3hCLFVBQU0sQ0FBQyxxQkFBcUIsQ0FBQyxhQUFhLENBQUMsQ0FBQztHQUMvQyxDQUFBOztBQUVELGVBQWEsRUFBRSxDQUFDO0NBQ25CLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0IGNvbnN0IHNldHVwVmlld1BvcnRPZiA9IChnbCkgPT4ge1xyXG4gICAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xyXG4gICAgZ2wucHJvamVjdGlvbk1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICBnbC52aWV3TWF0cml4ID0gbWF0NC5jcmVhdGUoKTtcclxuICAgIG1hdDQucGVyc3BlY3RpdmUoZ2wucHJvamVjdGlvbk1hdHJpeCwgNDUsIGdsLmNhbnZhcy53aWR0aCAvIGdsLmNhbnZhcy5oZWlnaHQsIDAuMSwgMTAwLjApO1xyXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNsZWFyVmlld1BvcnRPZiA9IChnbCkgPT4ge1xyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcG9zaXRpb25DYW1lcmFUbyA9IChwb3NpdGlvblZlY3RvcikgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdXNpbmc6IChnbCkgPT4geyAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRpcmVjdENhbWVyYVRvID0gKGRpcmVjdGlvblZlY3RvcikgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdXNpbmc6IChnbCkgPT4geyAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgZ2V0V2ViR0xDb250ZXh0T2YgPSAoY2FudmFzKSA9PiB7XHJcbiAgICBjb25zdCBnbE9wdGlvbnMgPSB7IGFudGlhbGlhczogdHJ1ZSB9O1xyXG4gICAgY29uc3QgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIsIGdsT3B0aW9ucykgXHJcbiAgICAgICAgICAgICB8fCBjYW52YXMuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLCBnbE9wdGlvbnMpO1xyXG5cclxuICAgIGlmKCFnbCkge1xyXG4gICAgICAgIHRocm93IFwiV2ViR0wgaXMgbm90IHN1cHBvcnRlZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBnbDtcclxufVxyXG4iLCJpbXBvcnQgIHsgbG9hZFNoYWRlclByb2dyYW0gfSBmcm9tICcuL2dsLXNoYWRlcnMnXHJcblxyXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKHJlbmRlcmFibGUpID0+IHsgICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvOiAoZ2wpID0+IHtcclxuICAgIFxyXG4gICAgICAgICAgICBjb25zdCB2ZXJ0ZXJCdWZmZXJGcm9tID0gKHJlbmRlcmFibGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRpY2VzID0gcmVuZGVyYWJsZS52ZXJ0aWNlcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIuaXRlbVNpemUgPSAzO1xyXG4gICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyLm51bUl0ZW1zID0gMztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVydGV4QnVmZmVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaGFkZXJQcm9ncmFtRnJvbSA9IChyZW5kZXJhYmxlKSA9PiB7IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRTaGFkZXJQcm9ncmFtKHJlbmRlcmFibGUuc2hhZGVyTmFtZXMpLnRvKGdsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoIXJlbmRlcmFibGUudmVydGV4QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJhYmxlLnZlcnRleEJ1ZmZlciA9IHZlcnRlckJ1ZmZlckZyb20ocmVuZGVyYWJsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKCFyZW5kZXJhYmxlLnNoYWRlclByb2dyYW0pIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmFibGUuc2hhZGVyUHJvZ3JhbSA9IHNoYWRlclByb2dyYW1Gcm9tKHJlbmRlcmFibGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZighcmVuZGVyYWJsZS50cmFuc2Zvcm1hdGlvbk1hdHJpeCkge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyYWJsZS50cmFuc2Zvcm1hdGlvbk1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNoYWRlclByb2dyYW0gPSByZW5kZXJhYmxlLnNoYWRlclByb2dyYW07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXRNYXRyaXhVbmlmb3JtcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYoc2hhZGVyUHJvZ3JhbS5wTWF0cml4VW5pZm9ybSwgZmFsc2UsIGdsLnByb2plY3Rpb25NYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdihzaGFkZXJQcm9ncmFtLm12TWF0cml4VW5pZm9ybSwgZmFsc2UsIHJlbmRlcmFibGUudHJhbnNmb3JtYXRpb25NYXRyaXgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtYXQ0LmlkZW50aXR5KHJlbmRlcmFibGUudHJhbnNmb3JtYXRpb25NYXRyaXgpO1xyXG4gICAgICAgICAgICBtYXQ0LnRyYW5zbGF0ZShyZW5kZXJhYmxlLnRyYW5zZm9ybWF0aW9uTWF0cml4LCByZW5kZXJhYmxlLnRyYW5zZm9ybWF0aW9uTWF0cml4LCBbLTEuNSwgMC4wLCAtNy4wXSk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCByZW5kZXJhYmxlLnZlcnRleEJ1ZmZlcik7XHJcbiAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhQb3NpdGlvbkF0dHJpYnV0ZSwgcmVuZGVyYWJsZS52ZXJ0ZXhCdWZmZXIuaXRlbVNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIHNldE1hdHJpeFVuaWZvcm1zKCk7XHJcbiAgICAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCByZW5kZXJhYmxlLnZlcnRleEJ1ZmZlci5udW1JdGVtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImNvbnN0IHZhbGlkYXRlVGhhdFNoYWRlcldhc0NvbXBpbGVkU3VjY2Vzc2Z1bGx5ID0gKGdsLCBzaGFkZXIsIHNoYWRlck5hbWUpID0+IHtcclxuICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XHJcbiAgICAgICAgdmFyIGxhc3RFcnJvciA9IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcclxuICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcclxuICAgICAgICB0aHJvdyBcIkZhaWxlZCB0byBjb21waWxlIHNoYWRlciBcIiArIHNoYWRlck5hbWUgKyBcIjpcIiArIGxhc3RFcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgdmFsaWRhdGVUaGF0UHJvZ3JhbVdhc0xpbmtlZFN1Y2Nlc3NmdWxseSA9IChnbCwgc2hhZGVyUHJvZ3JhbSkgPT4ge1xyXG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHNoYWRlclByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xyXG4gICAgICAgIHZhciBsYXN0RXJyb3IgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKTtcclxuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgICAgIHRocm93IFwiRmFpbGVkIHRvIGxpbmsgc2hhZGVyIHByb2dyYW06XCIgKyBsYXN0RXJyb3I7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGxvYWRTaGFkZXJGcm9tRWxlbWVudCA9IChlbGVtZW50SWQpID0+ICh7XHJcbiAgICB1c2luZzogKGdsKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2hhZGVyU2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XHJcbiAgICAgICAgY29uc3Qgc2hhZGVyVHlwZSA9IHNoYWRlclNjcmlwdEVsZW1lbnQudHlwZSA9PSBcIngtc2hhZGVyL3gtZnJhZ21lbnRcIiA/IGdsLkZSQUdNRU5UX1NIQURFUiA6IGdsLlZFUlRFWF9TSEFERVI7XHJcbiAgICAgICAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpO1xyXG5cclxuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzaGFkZXJTY3JpcHRFbGVtZW50LnRleHRDb250ZW50KTtcclxuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcbiAgICAgICAgdmFsaWRhdGVUaGF0U2hhZGVyV2FzQ29tcGlsZWRTdWNjZXNzZnVsbHkoZ2wsIHNoYWRlciwgZWxlbWVudElkKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgfVxyXG59KVxyXG5cclxuY29uc3QgbG9hZFNoYWRlciA9IChzaGFkZXJOYW1lKSA9PiAoe1xyXG4gICAgdG86IChzaGFkZXJQcm9ncmFtKSA9PiAoe1xyXG4gICAgICAgIHVzaW5nOiAoZ2wpID0+IHtcclxuICAgICAgICAgICAgdmFyIHNoYWRlciA9IGxvYWRTaGFkZXJGcm9tRWxlbWVudChzaGFkZXJOYW1lKS51c2luZyhnbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBnbC5hdHRhY2hTaGFkZXIoc2hhZGVyUHJvZ3JhbSwgc2hhZGVyKTtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0pXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VW5pZm9ybSA9ICh1bmlmb3JtTmFtZSkgPT4gKHtcclxuICAgIG9mOiAoc2hhZGVyUHJvZ3JhbSkgPT4gKHtcclxuICAgICAgICB1c2luZzogKGdsKSA9PiB7XHJcbiAgICAgICAgICAgIHNoYWRlclByb2dyYW0udW5pZm9ybXMgPSBzaGFkZXJQcm9ncmFtLnVuaWZvcm1zIHx8IFtdO1xyXG4gICAgICAgICAgICBzaGFkZXJQcm9ncmFtLnVuaWZvcm1zW3VuaWZvcm1OYW1lXSA9IHNoYWRlclByb2dyYW0udW5pZm9ybXNbdW5pZm9ybU5hbWVdIHx8IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCB1bmlmb3JtTmFtZSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHNoYWRlclByb2dyYW0udW5pZm9ybXNbdW5pZm9ybU5hbWVdOyAgXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCBsb2FkU2hhZGVyUHJvZ3JhbSA9IChzaGFkZXJOYW1lcykgPT4gKHtcclxuICAgIHRvOiAoZ2wpID0+IHtcclxuICAgICAgICBjb25zdCBzaGFkZXJQcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIHNoYWRlck5hbWUgb2Ygc2hhZGVyTmFtZXMpIHtcclxuICAgICAgICAgICAgbG9hZFNoYWRlcihzaGFkZXJOYW1lKS50byhzaGFkZXJQcm9ncmFtKS51c2luZyhnbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGdsLmxpbmtQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgICAgIHZhbGlkYXRlVGhhdFByb2dyYW1XYXNMaW5rZWRTdWNjZXNzZnVsbHkoZ2wsIHNoYWRlclByb2dyYW0pO1xyXG5cclxuICAgICAgICBnbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgICAgIHNoYWRlclByb2dyYW0udmVydGV4UG9zaXRpb25BdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcImFWZXJ0ZXhQb3NpdGlvblwiKTtcclxuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShzaGFkZXJQcm9ncmFtLnZlcnRleFBvc2l0aW9uQXR0cmlidXRlKTtcclxuXHJcbiAgICAgICAgc2hhZGVyUHJvZ3JhbS5wTWF0cml4VW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcInVQTWF0cml4XCIpO1xyXG4gICAgICAgIHNoYWRlclByb2dyYW0ubXZNYXRyaXhVbmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclByb2dyYW0sIFwidU1WTWF0cml4XCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gc2hhZGVyUHJvZ3JhbTtcclxuICAgIH1cclxufSlcclxuIiwiaW1wb3J0ICB7IGdldFdlYkdMQ29udGV4dE9mIH0gZnJvbSAnLi9nbC1jb250ZXh0J1xyXG5pbXBvcnQgIHsgc2V0dXBWaWV3UG9ydE9mLCBjbGVhclZpZXdQb3J0T2YsICB9IGZyb20gJy4vZ2wtY2FtZXJhJ1xyXG5pbXBvcnQgIHsgcmVuZGVyICB9IGZyb20gJy4vZ2wtcmVuZGVyYWJsZSdcclxuXHJcbmV4cG9ydCBjb25zdCBzdGFydE9uID0gKGNhbnZhcykgPT4ge1xyXG5cclxuICAgIGNvbnN0IHJlc2l6ZUNhbnZhc1RvRml0V2luZG93ID0gKCkgPT4ge1xyXG4gICAgICAgIGNhbnZhcy53aWR0aD13aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0PXdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0cmlhbmdsZVZlcnRpdmVzID0gW1xyXG4gICAgICAgIDAuMCwgIDEuMCwgIDAuMCxcclxuICAgICAgICAtMS4wLCAtMS4wLCAgMC4wLFxyXG4gICAgICAgIDEuMCwgLTEuMCwgIDAuMFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCB0cmlhbmdsZSA9IHsgICAgICAgIFxyXG4gICAgICAgIHZlcnRpY2VzOiB0cmlhbmdsZVZlcnRpdmVzLFxyXG4gICAgICAgIHNoYWRlck5hbWVzOiBbXCJzaGFkZXItZnNcIiwgXCJzaGFkZXItdnNcIl1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnbCA9IGdldFdlYkdMQ29udGV4dE9mKGNhbnZhcyk7XHJcblxyXG4gICAgY29uc3QgYW5pbWF0aW9uTG9vcCA9ICgpID0+IHtcclxuICAgICAgICByZXNpemVDYW52YXNUb0ZpdFdpbmRvdygpO1xyXG5cclxuICAgICAgICBzZXR1cFZpZXdQb3J0T2YoZ2wpO1xyXG4gICAgICAgIGNsZWFyVmlld1BvcnRPZihnbCk7XHJcbiAgICAgICAgcmVuZGVyKHRyaWFuZ2xlKS50byhnbCk7XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb25Mb29wKTtcclxuICAgIH1cclxuXHJcbiAgICBhbmltYXRpb25Mb29wKCk7XHJcbn1cclxuIl19
